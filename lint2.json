[{"filePath":"D:\\masterkeylabsv2.0\\src\\app\\admin\\dashboard\\page.js","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":110,"column":21,"nodeType":"JSXOpeningElement","endLine":110,"endColumn":114}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabaseClient';\r\nimport {\r\n    ResponsiveContainer,\r\n    PieChart, Pie, Cell,\r\n    BarChart, Bar, XAxis, YAxis, Tooltip, Legend,\r\n    AreaChart, Area\r\n} from 'recharts';\r\n\r\nexport default function AdminDashboard() {\r\n    const router = useRouter();\r\n    const [businesses, setBusinesses] = useState([]);\r\n    const [stats, setStats] = useState({ total: 0, critical: 0, totalWaste: 0 });\r\n    const [loading, setLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    const COLORS = ['#00e5ff', '#ff3d00', '#ffd600', '#00e676', '#d500f9', '#3d5afe', '#ff9100'];\r\n\r\n    useEffect(() => {\r\n        const session = localStorage.getItem('admin_session');\r\n        if (!session) {\r\n            router.push('/admin/login');\r\n            return;\r\n        }\r\n        fetchData();\r\n    }, [router]);\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { data: bizData } = await supabase\r\n                .from('businesses')\r\n                .select(`\r\n                    *,\r\n                    ai_threat_results (threat_level, score),\r\n                    loss_audit_results (total_burn)\r\n                `)\r\n                .order('created_at', { ascending: false });\r\n\r\n            if (bizData) {\r\n                setBusinesses(bizData);\r\n\r\n                // Calculate basic stats\r\n                const total = bizData.length;\r\n                const critical = bizData.filter(b => b.ai_threat_results?.[0]?.threat_level === 'KHATRA').length;\r\n                const waste = bizData.reduce((acc, b) => acc + (b.loss_audit_results?.[0]?.total_burn || 0), 0);\r\n\r\n                setStats({ total, critical, totalWaste: waste });\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- Analytics Transformations ---\r\n    const industryData = useMemo(() => {\r\n        const counts = {};\r\n        businesses.forEach(b => {\r\n            const cat = b.classification || 'Other';\r\n            counts[cat] = (counts[cat] || 0) + 1;\r\n        });\r\n        return Object.keys(counts).map(name => ({ name: name.replace('_', ' ').toUpperCase(), value: counts[name] }));\r\n    }, [businesses]);\r\n\r\n    const threatLandscape = useMemo(() => {\r\n        const counts = { 'KHATRA': 0, 'SAVDHAN': 0, 'SAFE': 0 };\r\n        businesses.forEach(b => {\r\n            const level = b.ai_threat_results?.[0]?.threat_level || 'PENDING';\r\n            if (counts[level] !== undefined) counts[level]++;\r\n        });\r\n        return [\r\n            { name: 'Khatra (Critical)', value: counts['KHATRA'], color: '#ff3d00' },\r\n            { name: 'Savdhan (Warning)', value: counts['SAVDHAN'], color: '#ffd600' },\r\n            { name: 'Safe (Nominal)', value: counts['SAFE'], color: '#00e676' }\r\n        ];\r\n    }, [businesses]);\r\n\r\n    const economicTrend = useMemo(() => {\r\n        // Mocking trend based on registration date for visual appeal\r\n        const groups = {};\r\n        businesses.forEach(b => {\r\n            const date = new Date(b.created_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n            groups[date] = (groups[date] || 0) + (b.loss_audit_results?.[0]?.total_burn || 0);\r\n        });\r\n        return Object.keys(groups).slice(0, 7).reverse().map(date => ({\r\n            date,\r\n            burn: Math.round(groups[date] / 1000)\r\n        }));\r\n    }, [businesses]);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('admin_session');\r\n        router.push('/admin/login');\r\n    };\r\n\r\n    const filteredBusinesses = businesses.filter(b =>\r\n        b.entity_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        b.email?.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#020617] text-white flex font-sans selection:bg-primary/30\">\r\n            {/* Sidebar */}\r\n            <aside className=\"w-64 border-r border-white/5 bg-[#03081a] flex flex-col fixed h-full z-10 transition-all\">\r\n                <div className=\"p-8\">\r\n                    <img src=\"/logo-icon.png\" alt=\"MasterKey Labs\" className=\"h-16 w-auto mb-2 object-contain\" />\r\n                    <p className=\"text-[10px] text-primary font-black uppercase tracking-[0.3em] mt-2\">Command Center</p>\r\n                </div>\r\n\r\n                <nav className=\"flex-1 px-4 space-y-2\">\r\n                    <button className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/10 text-primary border border-primary/20 transition-all text-left\">\r\n                        <span className=\"material-symbols-outlined\">analytics</span>\r\n                        <span className=\"text-sm font-bold tracking-tight\">Data Tracking</span>\r\n                    </button>\r\n                    <button className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-white/40 hover:text-white transition-all text-left\">\r\n                        <span className=\"material-symbols-outlined text-sm\">database</span>\r\n                        <span className=\"text-sm font-medium\">Database Management</span>\r\n                    </button>\r\n                    <button className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-white/40 hover:text-white transition-all text-left\">\r\n                        <span className=\"material-symbols-outlined text-sm\">settings_suggest</span>\r\n                        <span className=\"text-sm font-medium\">System Scaling</span>\r\n                    </button>\r\n                </nav>\r\n\r\n                <div className=\"p-6 border-t border-white/5\">\r\n                    <button onClick={handleLogout} className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400/60 hover:text-red-400 hover:bg-red-400/5 transition-all text-left group\">\r\n                        <span className=\"material-symbols-outlined text-sm group-hover:rotate-180 transition-transform\">logout</span>\r\n                        <span className=\"text-sm font-black uppercase tracking-widest text-xs\">Disconnect</span>\r\n                    </button>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 ml-64 p-10\">\r\n                {/* Header */}\r\n                <header className=\"flex items-center justify-between mb-12\">\r\n                    <div>\r\n                        <h1 className=\"text-4xl font-black tracking-tight mb-2 uppercase\">System Intelligence</h1>\r\n                        <p className=\"text-white/40 font-medium tracking-wide\">Real-time tracking of all business diagnostics & market threats.</p>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"flex flex-col items-end\">\r\n                            <span className=\"text-xs font-black text-primary tracking-widest uppercase mb-1\">Status: Operational</span>\r\n                            <div className=\"flex gap-1\">\r\n                                <span className=\"w-8 h-1 bg-primary rounded-full\"></span>\r\n                                <span className=\"w-8 h-1 bg-primary/30 rounded-full animate-pulse\"></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n\r\n                {/* Stats Grid */}\r\n                <div className=\"grid grid-cols-3 gap-8 mb-12\">\r\n                    <div className=\"glass rounded-3xl p-8 border border-white/5 flex flex-col items-start shadow-2xl relative overflow-hidden group\">\r\n                        <div className=\"absolute top-0 right-0 p-8 opacity-10 group-hover:scale-125 transition-transform duration-700\">\r\n                            <span className=\"material-symbols-outlined text-7xl\">corporate_fare</span>\r\n                        </div>\r\n                        <span className=\"text-[10px] font-black uppercase tracking-[0.4em] text-white/30 mb-2\">Total Deployments</span>\r\n                        <span className=\"text-5xl font-black text-white mb-2\">{stats.total}</span>\r\n                        <span className=\"text-xs text-primary font-bold\">Businesses Analyzed</span>\r\n                    </div>\r\n\r\n                    <div className=\"glass rounded-3xl p-8 border border-alert-red/20 bg-alert-red/5 flex flex-col items-start shadow-2xl relative overflow-hidden group\">\r\n                        <div className=\"absolute top-0 right-0 p-8 opacity-10 group-hover:scale-125 transition-transform duration-700\">\r\n                            <span className=\"material-symbols-outlined text-7xl text-alert-red\">warning</span>\r\n                        </div>\r\n                        <span className=\"text-[10px] font-black uppercase tracking-[0.4em] text-alert-red/50 mb-2\">Critical Threats</span>\r\n                        <span className=\"text-5xl font-black text-alert-red mb-2\">{stats.critical}</span>\r\n                        <span className=\"text-xs text-alert-red font-bold\">Immediate Action Required</span>\r\n                    </div>\r\n\r\n                    <div className=\"glass rounded-3xl p-8 border border-primary/20 flex flex-col items-start shadow-2xl relative overflow-hidden group\">\r\n                        <div className=\"absolute top-0 right-0 p-8 opacity-10 group-hover:scale-125 transition-transform duration-700\">\r\n                            <span className=\"material-symbols-outlined text-7xl text-primary\">payments</span>\r\n                        </div>\r\n                        <span className=\"text-[10px] font-black uppercase tracking-[0.4em] text-primary/50 mb-2\">Total Detected Waste</span>\r\n                        <span className=\"text-5xl font-black text-white mb-2\">₹{(stats.totalWaste / 100000).toFixed(1)}L</span>\r\n                        <span className=\"text-xs text-primary font-bold\">Monthly Operational Burn</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Advanced Analytics Grid */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12\">\r\n                    {/* Industry Composition */}\r\n                    <div className=\"glass rounded-[2.5rem] p-8 border border-white/5\">\r\n                        <h3 className=\"text-sm font-black uppercase tracking-widest mb-8 flex items-center gap-2\">\r\n                            <span className=\"material-symbols-outlined text-primary text-lg\">pie_chart</span>\r\n                            Market Composition\r\n                        </h3>\r\n                        <div className=\"h-72 w-full\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <PieChart>\r\n                                    <Pie\r\n                                        data={industryData}\r\n                                        innerRadius={60}\r\n                                        outerRadius={90}\r\n                                        paddingAngle={5}\r\n                                        dataKey=\"value\"\r\n                                    >\r\n                                        {industryData.map((entry, index) => (\r\n                                            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                                        ))}\r\n                                    </Pie>\r\n                                    <Tooltip\r\n                                        contentStyle={{ backgroundColor: '#03081a', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '12px' }}\r\n                                        itemStyle={{ color: '#fff', fontSize: '10px', textTransform: 'uppercase', fontWeight: 900 }}\r\n                                    />\r\n                                    <Legend wrapperStyle={{ fontSize: '10px', paddingTop: '20px' }} />\r\n                                </PieChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Threat Landscape */}\r\n                    <div className=\"glass rounded-[2.5rem] p-8 border border-white/5\">\r\n                        <h3 className=\"text-sm font-black uppercase tracking-widest mb-8 flex items-center gap-2\">\r\n                            <span className=\"material-symbols-outlined text-alert-red text-lg\">bar_chart</span>\r\n                            Threat Landscape\r\n                        </h3>\r\n                        <div className=\"h-72 w-full\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <BarChart data={threatLandscape}>\r\n                                    <XAxis dataKey=\"name\" stroke=\"rgba(255,255,255,0.2)\" fontSize={8} tickLine={false} axisLine={false} />\r\n                                    <YAxis hide />\r\n                                    <Tooltip\r\n                                        cursor={{ fill: 'rgba(255,255,255,0.05)' }}\r\n                                        contentStyle={{ backgroundColor: '#03081a', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '12px' }}\r\n                                    />\r\n                                    <Bar dataKey=\"value\" radius={[10, 10, 0, 0]}>\r\n                                        {threatLandscape.map((entry, index) => (\r\n                                            <Cell key={`cell-${index}`} fill={entry.color} />\r\n                                        ))}\r\n                                    </Bar>\r\n                                </BarChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Economic Burn Trend */}\r\n                    <div className=\"lg:col-span-2 glass rounded-[2.5rem] p-8 border border-white/5\">\r\n                        <h3 className=\"text-sm font-black uppercase tracking-widest mb-8 flex items-center gap-2\">\r\n                            <span className=\"material-symbols-outlined text-primary text-lg\">timeline</span>\r\n                            Detected Capital Waste Trend (₹K)\r\n                        </h3>\r\n                        <div className=\"h-64 w-full\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <AreaChart data={economicTrend}>\r\n                                    <defs>\r\n                                        <linearGradient id=\"colorBurn\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                            <stop offset=\"5%\" stopColor=\"#00e5ff\" stopOpacity={0.3} />\r\n                                            <stop offset=\"95%\" stopColor=\"#00e5ff\" stopOpacity={0} />\r\n                                        </linearGradient>\r\n                                    </defs>\r\n                                    <XAxis dataKey=\"date\" stroke=\"rgba(255,255,255,0.2)\" fontSize={10} tickLine={false} axisLine={false} />\r\n                                    <YAxis stroke=\"rgba(255,255,255,0.2)\" fontSize={10} tickLine={false} axisLine={false} />\r\n                                    <Tooltip\r\n                                        contentStyle={{ backgroundColor: '#03081a', border: '1px solid rgba(255,255,255,0.1)', borderRadius: '12px' }}\r\n                                    />\r\n                                    <Area type=\"monotone\" dataKey=\"burn\" stroke=\"#00e5ff\" fillOpacity={1} fill=\"url(#colorBurn)\" strokeWidth={3} />\r\n                                </AreaChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Database Table */}\r\n                <div className=\"glass rounded-[2.5rem] border border-white/5 shadow-2xl overflow-hidden\">\r\n                    <div className=\"p-8 border-b border-white/5 flex items-center justify-between bg-white/[0.02]\">\r\n                        <h3 className=\"text-xl font-bold tracking-tight flex items-center gap-3\">\r\n                            <span className=\"material-symbols-outlined text-primary\">storage</span>\r\n                            Operational Database\r\n                        </h3>\r\n                        <div className=\"relative\">\r\n                            <span className=\"absolute left-4 top-1/2 -translate-y-1/2 material-symbols-outlined text-white/20 text-sm\">search</span>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search entity or email...\"\r\n                                value={searchTerm}\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                                className=\"bg-white/5 border border-white/10 rounded-full pl-10 pr-6 py-2 text-sm focus:outline-none focus:border-primary/40 focus:bg-white/10 transition-all w-64\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full text-left border-collapse\">\r\n                            <thead>\r\n                                <tr className=\"text-[10px] uppercase font-black tracking-widest text-white/30 border-b border-white/5\">\r\n                                    <th className=\"px-8 py-6\">Entity Name</th>\r\n                                    <th className=\"px-8 py-6\">Contact Info</th>\r\n                                    <th className=\"px-8 py-6\">Classification</th>\r\n                                    <th className=\"px-8 py-6\">Threat Status</th>\r\n                                    <th className=\"px-8 py-6\">Burn Rate</th>\r\n                                    <th className=\"px-8 py-6 text-right\">Registered</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-white/[0.03]\">\r\n                                {loading ? (\r\n                                    <tr>\r\n                                        <td colSpan=\"6\" className=\"px-8 py-20 text-center text-white/20 uppercase tracking-[0.5em] font-black animate-pulse\">\r\n                                            Scanning Database...\r\n                                        </td>\r\n                                    </tr>\r\n                                ) : filteredBusinesses.length === 0 ? (\r\n                                    <tr>\r\n                                        <td colSpan=\"6\" className=\"px-8 py-20 text-center text-white/20\">\r\n                                            No entities detected in the current query.\r\n                                        </td>\r\n                                    </tr>\r\n                                ) : filteredBusinesses.map((biz) => {\r\n                                    const threat = biz.ai_threat_results?.[0];\r\n                                    const loss = biz.loss_audit_results?.[0];\r\n                                    return (\r\n                                        <tr key={biz.id} className=\"hover:bg-white/[0.02] transition-colors group\">\r\n                                            <td className=\"px-8 py-6\">\r\n                                                <div className=\"font-bold text-white group-hover:text-primary transition-colors\">{biz.entity_name}</div>\r\n                                                <div className=\"text-[10px] text-white/30 font-medium uppercase tracking-tighter mt-1\">{biz.location || 'Remote Node'}</div>\r\n                                            </td>\r\n                                            <td className=\"px-8 py-6\">\r\n                                                <div className=\"text-sm font-medium text-white/70\">{biz.email || '—'}</div>\r\n                                                <div className=\"text-xs text-white/30\">{biz.phone || '—'}</div>\r\n                                            </td>\r\n                                            <td className=\"px-8 py-6\">\r\n                                                <span className=\"text-xs font-bold text-white/50 bg-white/5 px-3 py-1 rounded-full uppercase tracking-tighter\">\r\n                                                    {biz.classification}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"px-8 py-6\">\r\n                                                <div className={`text-xs font-black uppercase tracking-widest ${threat?.threat_level === 'KHATRA' ? 'text-alert-red' :\r\n                                                    threat?.threat_level === 'SAVDHAN' ? 'text-alert-orange' : 'text-primary'\r\n                                                    }`}>\r\n                                                    {threat?.threat_level || 'PENDING'}\r\n                                                </div>\r\n                                                <div className=\"text-[10px] text-white/20 mt-1 font-bold\">SCORE: {threat?.score || '0'}</div>\r\n                                            </td>\r\n                                            <td className=\"px-8 py-6\">\r\n                                                <div className=\"text-sm font-bold text-white\">₹{loss ? (loss.total_burn / 1000).toFixed(1) : '0'}K/mo</div>\r\n                                                <div className=\"w-16 h-1 bg-white/5 rounded-full mt-2 overflow-hidden\">\r\n                                                    <div className=\"h-full bg-primary\" style={{ width: loss ? `${Math.min(100, (loss.total_burn / 500000) * 100)}%` : '0%' }}></div>\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"px-8 py-6 text-right\">\r\n                                                <div className=\"text-xs font-mono text-white/40\">{new Date(biz.created_at).toLocaleDateString()}</div>\r\n                                                <div className=\"text-[10px] text-white/20 font-medium uppercase tracking-widest mt-1\">{new Date(biz.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\app\\admin\\login\\page.js","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":66,"column":21,"nodeType":"JSXOpeningElement","endLine":66,"endColumn":168}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabaseClient';\r\n\r\nexport default function AdminLogin() {\r\n    const router = useRouter();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const { data: admin, error: authError } = await supabase\r\n                .from('admin_users')\r\n                .select('*')\r\n                .eq('email', email)\r\n                .eq('password_hash', password)\r\n                .single();\r\n\r\n            if (authError) {\r\n                console.error('Supabase Auth Error:', authError);\r\n                // Check for missing table vs invalid credentials\r\n                if (authError.code === 'PGRST116') {\r\n                    throw new Error('Invalid specialized credentials.');\r\n                }\r\n                throw new Error(`System Error: ${authError.message}`);\r\n            }\r\n\r\n            if (!admin) {\r\n                throw new Error('Invalid specialized credentials.');\r\n            }\r\n\r\n            // Success\r\n            localStorage.setItem('admin_session', JSON.stringify({\r\n                id: admin.id,\r\n                email: admin.email,\r\n                role: admin.role,\r\n                timestamp: Date.now()\r\n            }));\r\n            router.push('/admin/dashboard');\r\n\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#020617] text-white flex flex-col items-center justify-center p-6 font-sans selection:bg-primary/30\">\r\n            {/* Ambient Background */}\r\n            <div className=\"fixed inset-0 pointer-events-none opacity-20 overflow-hidden\">\r\n                <div className=\"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-primary/20 blur-[180px] rounded-full\"></div>\r\n                <div className=\"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-cyan-900/20 blur-[180px] rounded-full\"></div>\r\n            </div>\r\n\r\n            <div className=\"relative z-10 w-full max-w-md\">\r\n                {/* Logo Area */}\r\n                <div className=\"flex flex-col items-center mb-10 text-center\">\r\n                    <img src=\"/logo-stacked.png\" alt=\"MasterKey Labs\" className=\"h-24 md:h-32 w-auto object-contain drop-shadow-[0_0_15px_rgba(0,229,255,0.2)] mb-6\" />\r\n                    <div className=\"inline-block px-3 py-1 bg-primary/10 rounded-full text-primary text-[10px] font-black tracking-[0.25em] uppercase border border-primary/20\">\r\n                        Command Center Access\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Login Form */}\r\n                <form onSubmit={handleLogin} className=\"glass rounded-[2rem] p-8 md:p-10 border border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.5)]\">\r\n                    <h1 className=\"text-2xl font-bold mb-6 tracking-tight\">System Authentication</h1>\r\n\r\n                    {error && (\r\n                        <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-sm flex items-center gap-3\">\r\n                            <span className=\"material-symbols-outlined text-lg\">error</span>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"space-y-6\">\r\n                        <div>\r\n                            <label className=\"block text-xs font-black uppercase tracking-widest text-white/40 mb-2 ml-1\">Admin Email</label>\r\n                            <input\r\n                                type=\"email\"\r\n                                required\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                className=\"w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 focus:outline-none focus:border-primary/50 focus:bg-white/10 transition-all text-sm\"\r\n                                placeholder=\"name@masterkey.labs\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-xs font-black uppercase tracking-widest text-white/40 mb-2 ml-1\">Security Key</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                required\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                className=\"w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 focus:outline-none focus:border-primary/50 focus:bg-white/10 transition-all text-sm font-mono\"\r\n                                placeholder=\"••••••••••••\"\r\n                            />\r\n                        </div>\r\n\r\n                        <button\r\n                            disabled={loading}\r\n                            className=\"w-full bg-primary hover:bg-cyan-400 text-background-dark py-5 rounded-xl font-black text-sm tracking-[0.2em] uppercase transition-all glow-cyan flex items-center justify-center gap-3 group disabled:opacity-50\"\r\n                        >\r\n                            {loading ? (\r\n                                <span className=\"w-5 h-5 border-2 border-background-dark/30 border-t-background-dark rounded-full animate-spin\"></span>\r\n                            ) : (\r\n                                <>\r\n                                    <span>Decrypt Access</span>\r\n                                    <span className=\"material-symbols-outlined text-lg group-hover:translate-x-1 transition-transform\">fingerprint</span>\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"mt-8 text-center\">\r\n                        <p className=\"text-[10px] text-white/20 uppercase font-bold tracking-[.3em]\">\r\n                            Authorized Personnel Only\r\n                        </p>\r\n                    </div>\r\n                </form>\r\n\r\n                {/* Footer */}\r\n                <p className=\"mt-8 text-center text-white/20 text-xs\">\r\n                    Secure transmission encrypted with Quantum-Safe protocols.\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\app\\dashboard\\export\\page.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\app\\dashboard\\loss-audit\\page.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\app\\dashboard\\night-loss\\page.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\app\\dashboard\\page.js","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  74 |\n  75 |         if (authBusiness || devBusinessId) {\n> 76 |             setBusiness(authBusiness || { entity_name: 'Local Dev Business', id: devBusinessId });\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  77 |             fetchThreat();\n  78 |             fetchResults();\n  79 |         }","line":76,"column":13,"nodeType":null,"endLine":76,"endColumn":24},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  159 |     useEffect(() => {\n  160 |         if (threatResult) {\n> 161 |             setExtinctionDate(new Date(Date.now() + threatResult.years_left * 365.25 * 24 * 60 * 60 * 1000).toISOString());\n      |             ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  162 |         }\n  163 |     }, [threatResult]);\n  164 |","line":161,"column":13,"nodeType":null,"endLine":161,"endColumn":30}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useState, useEffect, useCallback, Suspense } from 'react';\r\nimport { useSearchParams, useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport Sidebar from '@/components/Sidebar';\r\nimport DashboardHeader from '@/components/DashboardHeader';\r\nimport HealthMeter from '@/components/HealthMeter';\r\nimport CapitalDetector from '@/components/CapitalDetector';\r\nimport ExtinctionTimer from '@/components/ExtinctionTimer';\r\nimport FloatingFAB from '@/components/FloatingFAB';\r\n\r\nimport DiagnosticLog from '@/components/DiagnosticLog';\r\nimport { supabase } from '@/lib/supabaseClient';\r\nimport { translations } from '@/lib/translations';\r\nimport { useAuth } from '@/lib/AuthContext';\r\n\r\nfunction DashboardContent() {\r\n    const { user, business: authBusiness, loading: authLoading } = useAuth();\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n    // businessId is no longer strictly used from searchParams\r\n    const businessId = authBusiness?.id;\r\n\r\n    const [lang, setLang] = useState('en');\r\n    const t = translations[lang];\r\n\r\n    const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n    const [business, setBusiness] = useState(null);\r\n    const [threatResult, setThreatResult] = useState(null);\r\n    const [lossResult, setLossResult] = useState(null);\r\n    const [exportResult, setExportResult] = useState(null);\r\n    const [nightResult, setNightResult] = useState(null);\r\n    const [visibilityResult, setVisibilityResult] = useState(null);\r\n\r\n    // Fetch business profile\r\n    const fetchBusiness = useCallback(async () => {\r\n        if (!businessId) return;\r\n        const { data } = await supabase.from('businesses').select('*').eq('id', businessId).single();\r\n        if (data) setBusiness(data);\r\n    }, [businessId]);\r\n\r\n    // Fetch AI threat results\r\n    const fetchThreat = useCallback(async () => {\r\n        if (!businessId) return;\r\n        const { data } = await supabase.from('ai_threat_results').select('*').eq('business_id', businessId).order('created_at', { ascending: false }).limit(1).single();\r\n        if (data) setThreatResult(data);\r\n    }, [businessId]);\r\n\r\n    // Fetch all feature results\r\n    const fetchResults = useCallback(async () => {\r\n        if (!businessId) return;\r\n        const [loss, exp, night, vis] = await Promise.all([\r\n            supabase.from('loss_audit_results').select('*').eq('business_id', businessId).order('created_at', { ascending: false }).limit(1).single(),\r\n            supabase.from('export_results').select('*').eq('business_id', businessId).order('created_at', { ascending: false }).limit(1).single(),\r\n            supabase.from('night_loss_results').select('*').eq('business_id', businessId).order('created_at', { ascending: false }).limit(1).single(),\r\n            supabase.from('visibility_results').select('*').eq('business_id', businessId).order('created_at', { ascending: false }).limit(1).single(),\r\n        ]);\r\n        if (loss.data) setLossResult(loss.data);\r\n        if (exp.data) setExportResult(exp.data);\r\n        if (night.data) setNightResult(night.data);\r\n        if (vis.data) setVisibilityResult(vis.data);\r\n    }, [businessId]);\r\n\r\n    useEffect(() => {\r\n        if (authLoading) return;\r\n        if (!user && window.location.hostname !== 'localhost') {\r\n            router.push('/');\r\n            return;\r\n        }\r\n\r\n        const devBusinessId = window.location.hostname === 'localhost' ? 'dev-business-123' : null;\r\n        const activeBusinessId = businessId || devBusinessId;\r\n\r\n        if (authBusiness || devBusinessId) {\r\n            setBusiness(authBusiness || { entity_name: 'Local Dev Business', id: devBusinessId });\r\n            fetchThreat();\r\n            fetchResults();\r\n        }\r\n\r\n        if (!activeBusinessId) return;\r\n\r\n        // Real-time subscriptions\r\n        const channels = [\r\n            supabase.channel('rt-threat')\r\n                .on('postgres_changes', { event: '*', schema: 'public', table: 'ai_threat_results', filter: `business_id=eq.${businessId}` }, () => fetchThreat())\r\n                .subscribe(),\r\n            supabase.channel('rt-loss')\r\n                .on('postgres_changes', { event: '*', schema: 'public', table: 'loss_audit_results', filter: `business_id=eq.${businessId}` }, () => fetchResults())\r\n                .subscribe(),\r\n            supabase.channel('rt-export')\r\n                .on('postgres_changes', { event: '*', schema: 'public', table: 'export_results', filter: `business_id=eq.${businessId}` }, () => fetchResults())\r\n                .subscribe(),\r\n            supabase.channel('rt-night')\r\n                .on('postgres_changes', { event: '*', schema: 'public', table: 'night_loss_results', filter: `business_id=eq.${businessId}` }, () => fetchResults())\r\n                .subscribe(),\r\n            supabase.channel('rt-visibility')\r\n                .on('postgres_changes', { event: '*', schema: 'public', table: 'visibility_results', filter: `business_id=eq.${activeBusinessId}` }, () => fetchResults())\r\n                .subscribe(),\r\n        ];\r\n\r\n        return () => channels.forEach(ch => ch.unsubscribe());\r\n    }, [businessId, user, authLoading, authBusiness, fetchThreat, fetchResults, router]);\r\n\r\n    // Format INR for summary cards\r\n    const fmtINR = (n) => {\r\n        if (!n) return '—';\r\n        if (n >= 100000) return `₹${(n / 100000).toFixed(1)}L`;\r\n        if (n >= 1000) return `₹${(n / 1000).toFixed(0)}K`;\r\n        return `₹${n.toLocaleString('en-IN')}`;\r\n    };\r\n\r\n    // Build diagnostic card data from real results\r\n    const cardData = [\r\n        {\r\n            title: t.dashboard.cards.loss.title,\r\n            amount: lossResult ? fmtINR(lossResult.total_burn) + '/mo' : t.dashboard.cards.loss.run,\r\n            description: lossResult\r\n                ? `Staff ₹${(lossResult.staff_waste / 1000).toFixed(0)}K + Mktg ₹${(lossResult.marketing_waste / 1000).toFixed(0)}K + Ops ₹${(lossResult.ops_waste / 1000).toFixed(0)}K wasted monthly`\r\n                : t.dashboard.cards.loss.sub,\r\n            icon: 'trending_down',\r\n            color: 'red',\r\n            href: `/dashboard/loss-audit`,\r\n        },\r\n        {\r\n            title: t.dashboard.cards.night.title,\r\n            amount: nightResult ? fmtINR(nightResult.monthly_loss) + '/mo' : t.dashboard.cards.night.run,\r\n            description: nightResult\r\n                ? `${nightResult.night_inquiries} night inquiries going unanswered monthly`\r\n                : t.dashboard.cards.night.sub,\r\n            icon: 'nightlight',\r\n            color: 'orange',\r\n            href: `/dashboard/night-loss`,\r\n        },\r\n        {\r\n            title: t.dashboard.cards.visibility.title,\r\n            amount: visibilityResult ? `${visibilityResult.percent}%` : t.dashboard.cards.visibility.run,\r\n            description: visibilityResult\r\n                ? `Status: ${visibilityResult.status} — ~${visibilityResult.missed_customers} customers missed/mo`\r\n                : t.dashboard.cards.visibility.sub,\r\n            icon: 'radar',\r\n            color: 'cyan',\r\n            href: `/dashboard/visibility`,\r\n        },\r\n        {\r\n            title: t.dashboard.cards.markets.title,\r\n            amount: exportResult ? fmtINR(exportResult.additional_income) + '/mo' : t.dashboard.cards.markets.run,\r\n            description: exportResult\r\n                ? `${exportResult.multiplier}x premium in ${exportResult.destination} market — ROI ${exportResult.roi_percent}%`\r\n                : t.dashboard.cards.markets.sub,\r\n            icon: 'public',\r\n            color: 'green',\r\n            href: `/dashboard/export`,\r\n        },\r\n    ];\r\n\r\n    const [extinctionDate, setExtinctionDate] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (threatResult) {\r\n            setExtinctionDate(new Date(Date.now() + threatResult.years_left * 365.25 * 24 * 60 * 60 * 1000).toISOString());\r\n        }\r\n    }, [threatResult]);\r\n\r\n    return (\r\n        <div className=\"bg-background-dark font-sans text-slate-100 min-h-screen selection:bg-ios-blue/30 selection:text-ios-blue overflow-x-hidden flex\">\r\n            <Sidebar t={t} sidebarOpen={sidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n\r\n            <main className=\"flex-1 ml-0 md:ml-64 p-4 md:p-10 relative overflow-y-auto h-screen w-full\">\r\n                {/* Background Sophistication */}\r\n                <div className=\"fixed inset-0 pointer-events-none z-0\">\r\n                    <div className=\"absolute top-0 right-0 w-[500px] h-[500px] bg-ios-blue/5 blur-[120px] rounded-full opacity-60\"></div>\r\n                    <div className=\"absolute bottom-0 left-0 w-[500px] h-[500px] bg-ios-orange/5 blur-[120px] rounded-full opacity-40\"></div>\r\n                </div>\r\n\r\n                <div className=\"max-w-7xl mx-auto relative z-10\">\r\n                    <DashboardHeader\r\n                        companyName={business?.entity_name || t.header.command}\r\n                        lang={lang}\r\n                        setLang={setLang}\r\n                        t={t}\r\n                        setSidebarOpen={setSidebarOpen}\r\n                    />\r\n\r\n                    {/* Grid Layout */}\r\n                    <div className=\"space-y-8\">\r\n                        {/* Highlights Section */}\r\n                        <section className=\"animate-fade-in opacity-0\" style={{ animationDelay: '0.1s', animationFillMode: 'forwards' }}>\r\n                            <div className=\"flex items-center gap-2 mb-6\">\r\n                                <span className=\"w-1 h-4 bg-ios-blue rounded-full\"></span>\r\n                                <h3 className=\"text-[11px] font-black uppercase tracking-[0.2em] text-white/30\">{t.dashboard.risksTitle}</h3>\r\n                            </div>\r\n                            <CapitalDetector cards={cardData} t={t} />\r\n                        </section>\r\n\r\n                        <section className=\"animate-fade-in opacity-0\" style={{ animationDelay: '0.2s', animationFillMode: 'forwards' }}>\r\n                            <ExtinctionTimer targetDate={extinctionDate} t={t} />\r\n                        </section>\r\n\r\n                        <div className=\"grid grid-cols-1 xl:grid-cols-5 gap-8 animate-fade-in opacity-0\" style={{ animationDelay: '0.3s', animationFillMode: 'forwards' }}>\r\n                            <div className=\"xl:col-span-3 space-y-8\">\r\n                                <div className=\"system-card border border-white/5 p-8 bg-white/[0.01] h-full\">\r\n                                    <div className=\"flex items-center justify-between mb-8\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <span className=\"material-symbols-outlined text-ios-blue\">troubleshoot</span>\r\n                                            <h3 className=\"text-[12px] font-bold text-white uppercase tracking-widest\">{t.dashboard.logTitle}</h3>\r\n                                        </div>\r\n                                        <span className=\"text-[10px] font-bold text-white/20 uppercase tracking-widest leading-none\">{t.dashboard.logStatus}</span>\r\n                                    </div>\r\n                                    <DiagnosticLog t={t} />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"xl:col-span-2\">\r\n                                <HealthMeter\r\n                                    zone={\r\n                                        !lossResult && !exportResult && !nightResult && !visibilityResult ? t.dashboard.health.analyzing\r\n                                            : (lossResult && exportResult && nightResult && visibilityResult) ? (threatResult?.threat_level === 'KHATRA' ? t.dashboard.health.critical : t.dashboard.health.optimized)\r\n                                                : t.dashboard.health.caution\r\n                                    }\r\n                                    months={threatResult?.years_left ? threatResult.years_left * 12 : null}\r\n                                    description={\r\n                                        !lossResult && !exportResult && !nightResult && !visibilityResult ? t.dashboard.health.analyzing\r\n                                            : (lossResult && exportResult && nightResult && visibilityResult) ? (threatResult?.timeline_desc || t.dashboard.health.optimized)\r\n                                                : t.dashboard.health.partial\r\n                                    }\r\n                                    score={(() => {\r\n                                        let base = 0;\r\n                                        if (lossResult) base += 25;\r\n                                        if (exportResult) base += 25;\r\n                                        if (nightResult) base += 25;\r\n                                        if (visibilityResult) base += 25;\r\n                                        return base;\r\n                                    })()}\r\n                                    t={t}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n\r\n            <FloatingFAB businessName={business?.entity_name} threatResult={threatResult} lossResult={lossResult} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function DashboardPage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"flex items-center justify-center min-h-screen bg-background-dark text-white\">Loading dashboard...</div>}>\r\n            <DashboardContent />\r\n        </Suspense>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\app\\dashboard\\visibility\\page.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\app\\layout.js","messages":[{"ruleId":"@next/next/no-page-custom-font","severity":1,"message":"Custom fonts not added in `pages/_document.js` will only load for a single page. This is discouraged. See: https://nextjs.org/docs/messages/no-page-custom-font","line":20,"column":9,"nodeType":"JSXOpeningElement","endLine":20,"endColumn":145}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Space_Grotesk } from \"next/font/google\";\nimport \"./globals.css\";\n\nconst spaceGrotesk = Space_Grotesk({\n  subsets: [\"latin\"],\n  variable: \"--font-space-grotesk\",\n});\n\nexport const metadata = {\n  title: \"Masterkey.OS | Command Center\",\n  description: \"AI-Powered Diagnostic Terminal for Business Intelligence\",\n};\n\nimport { AuthProvider } from '@/lib/AuthContext';\n\nexport default function RootLayout({ children }) {\n  return (\n    <html lang=\"en\" className=\"dark\" suppressHydrationWarning>\n      <head>\n        <link href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap\" rel=\"stylesheet\" />\n        <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\" />\n      </head>\n      <body className={`${spaceGrotesk.variable} font-sans antialiased bg-background-dark text-white selection:bg-primary/30 min-h-screen overflow-x-hidden`}\n        style={{ fontFamily: \"'Space Grotesk', sans-serif\" }}>\n        <AuthProvider>\n          {children}\n        </AuthProvider>\n      </body>\n    </html>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\app\\page.js","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":22,"column":25,"nodeType":"JSXOpeningElement","endLine":22,"endColumn":176},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":61,"column":29,"nodeType":"JSXOpeningElement","endLine":61,"endColumn":138}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from 'next/link';\r\nimport IntakeWizard from '@/components/IntakeWizard';\r\nimport { translations } from '@/lib/translations';\r\n\r\nexport const metadata = {\r\n    title: \"MasterKey OS | Business System Audit\",\r\n    description: \"Calculate your threat level and structural profit leaks in seconds.\",\r\n};\r\n\r\nexport default function Home() {\r\n    const t = translations['en'];\r\n\r\n    return (\r\n        <div className=\"bg-background-dark font-sans text-slate-100 min-h-screen selection:bg-ios-blue/30 selection:text-ios-blue overflow-x-hidden\">\r\n            {/* Minimal Grid Background */}\r\n            <div className=\"fixed inset-0 pointer-events-none z-[-1] opacity-[0.03]\" style={{ backgroundImage: 'linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)', backgroundSize: '100px 100px' }}></div>\r\n            <div className=\"fixed top-0 left-0 w-full h-screen spotlight pointer-events-none z-0\"></div>\r\n\r\n            <header className=\"relative z-50 pt-8 pb-4\">\r\n                <div className=\"flex flex-col items-center text-center px-6\">\r\n                    <div className=\"mb-0 mt-[-20px] scale-75 md:scale-100 flex justify-center w-full\">\r\n                        <img src=\"/logo-stacked.png\" alt=\"MasterKey Labs Logo\" className=\"h-48 md:h-64 object-contain opacity-90 drop-shadow-[0_0_15px_rgba(0,229,255,0.2)]\" />\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            <main className=\"relative z-10\">\r\n                <section className=\"container mx-auto px-6 py-4 lg:py-8 flex flex-col items-center\">\r\n\r\n                    {/* Hook & Copy */}\r\n                    <div className=\"flex flex-col items-center gap-4 max-w-4xl text-center mb-10\">\r\n                        <div className=\"ios-badge-cyan\">System Analysis Active</div>\r\n                        <h1 className=\"text-3xl md:text-5xl lg:text-6xl font-bold leading-[1.1] text-white tracking-tight text-balance\">\r\n                            Is your business engineered to scale, or destined for market extinction?\r\n                        </h1>\r\n                        <p className=\"text-white/50 text-base md:text-xl font-normal max-w-xl mt-4 leading-relaxed\">\r\n                            Find out your exact operational bleed in 120 seconds.\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Sunk-Cost Wizard imported purely as client component */}\r\n                    <IntakeWizard t={t} />\r\n\r\n                    <div className=\"mt-16 text-center max-w-xl\">\r\n                        <p className=\"text-slate-300 text-sm md:text-base font-medium\">\r\n                            {t.cta.main} <br />\r\n                            <span className=\"text-primary/70\">{t.cta.sub}</span>\r\n                        </p>\r\n                        <div className=\"flex -space-x-2 justify-center mt-6\">\r\n                            {[1, 2, 3].map(i => (\r\n                                <div key={i} className=\"w-8 h-8 rounded-full border-2 border-background-dark bg-ios-gray-dark flex items-center justify-center text-[8px] font-bold text-white/40\">MK</div>\r\n                            ))}\r\n                            <div className=\"w-8 h-8 rounded-full border-2 border-background-dark bg-ios-blue/10 flex items-center justify-center text-[10px] font-bold text-ios-blue font-mono\">+1k</div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                <footer className=\"border-t border-white/5 pt-20 pb-24 bg-black/40 mt-20\">\r\n                    <div className=\"container mx-auto px-6 flex flex-col items-center text-center\">\r\n                        <div className=\"mb-10 opacity-80 flex items-center justify-center\">\r\n                            <img src=\"/logo-text.png\" alt=\"MasterKey Labs\" className=\"h-6 md:h-8 w-auto object-contain brightness-110\" />\r\n                        </div>\r\n                        <div className=\"flex flex-wrap justify-center gap-x-12 gap-y-6 mb-16\">\r\n                            <span className=\"text-white/30 uppercase text-[10px] font-bold tracking-[0.2em]\">Systems</span>\r\n                            <span className=\"text-white/30 uppercase text-[10px] font-bold tracking-[0.2em]\">Infrastructure</span>\r\n                            <span className=\"text-white/30 uppercase text-[10px] font-bold tracking-[0.2em]\">Intelligence</span>\r\n                            <span className=\"text-white/30 uppercase text-[10px] font-bold tracking-[0.2em]\">Directives</span>\r\n                        </div>\r\n                        <div className=\"text-white/10 text-[9px] tracking-[0.3em] font-bold uppercase\">© 2025 MASTERKEY LABS — ADAPTIVE SYSTEMS PROTOCOL</div>\r\n                    </div>\r\n                </footer>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\components\\CapitalDetector.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\components\\DashboardHeader.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\components\\DiagnosticLog.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\components\\ExtinctionTimer.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\components\\FeatureLayout.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\components\\FloatingFAB.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\components\\HealthMeter.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\components\\IntakeWizard.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\components\\Sidebar.js","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":12,"column":25,"nodeType":"JSXOpeningElement","endLine":12,"endColumn":107}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from 'next/link';\r\nimport { useAuth } from '@/lib/AuthContext';\r\n\r\nexport default function Sidebar({ t, sidebarOpen, setSidebarOpen }) {\r\n    const { signOut } = useAuth();\r\n    return (\r\n        <>\r\n            {sidebarOpen && <div className=\"fixed inset-0 bg-black/60 z-[90] backdrop-blur-sm md:hidden\" onClick={() => setSidebarOpen && setSidebarOpen(false)} />}\r\n            <aside className={`w-64 border-r border-white/5 bg-background-dark flex flex-col fixed h-full z-[100] transition-transform duration-300 left-0 top-0 ${sidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'}`}>\r\n                <div className=\"p-8 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3 mb-2\">\r\n                        <img src=\"/logo.png\" alt=\"MasterKey Labs\" className=\"h-8 w-auto brightness-110\" />\r\n                    </div>\r\n                    {setSidebarOpen && (\r\n                        <button onClick={() => setSidebarOpen(false)} className=\"md:hidden text-white/60 hover:text-white\">\r\n                            <span className=\"material-symbols-outlined\">close</span>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                <nav className=\"flex-1 px-4 space-y-1.5 mt-2\">\r\n                    <Link className=\"flex items-center gap-3 px-4 py-2.5 rounded-xl bg-ios-blue/10 text-ios-blue border border-ios-blue/20 transition-all group\" href=\"/dashboard\">\r\n                        <span className=\"material-symbols-outlined text-lg\">dashboard_customize</span>\r\n                        <span className=\"text-[13px] font-semibold tracking-tight\">{t.sidebar.status}</span>\r\n                    </Link>\r\n\r\n                    <a className=\"flex items-center gap-3 px-4 py-2.5 rounded-xl text-white/40 hover:text-white/80 transition-all\" href=\"#\">\r\n                        <span className=\"material-symbols-outlined text-lg\">analytics</span>\r\n                        <span className=\"text-[13px] font-medium tracking-tight\">{t.sidebar.analytics}</span>\r\n                    </a>\r\n\r\n                    <div className=\"pt-4 pb-2 px-4\">\r\n                        <span className=\"text-[10px] font-bold text-white/10 uppercase tracking-[0.2em]\">{t.sidebar.protocols}</span>\r\n                    </div>\r\n\r\n                    <a className=\"flex items-center justify-between px-4 py-2.5 rounded-xl text-white/10 cursor-not-allowed group\" href=\"#\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <span className=\"material-symbols-outlined text-lg\">rocket_launch</span>\r\n                            <span className=\"text-[13px] font-medium tracking-tight opacity-50\">{t.sidebar.growth}</span>\r\n                        </div>\r\n                        <span className=\"material-symbols-outlined text-[14px]\">lock</span>\r\n                    </a>\r\n\r\n                    <a className=\"flex items-center justify-between px-4 py-2.5 rounded-xl text-white/10 cursor-not-allowed group\" href=\"#\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <span className=\"material-symbols-outlined text-lg\">hub</span>\r\n                            <span className=\"text-[13px] font-medium tracking-tight opacity-50\">{t.sidebar.map}</span>\r\n                        </div>\r\n                        <span className=\"material-symbols-outlined text-[14px]\">lock</span>\r\n                    </a>\r\n                </nav>\r\n\r\n                <div className=\"p-6 mt-auto space-y-4\">\r\n                    <button\r\n                        onClick={signOut}\r\n                        className=\"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-white/40 hover:text-ios-orange hover:bg-ios-orange/5 transition-all text-left\"\r\n                    >\r\n                        <span className=\"material-symbols-outlined text-lg\">logout</span>\r\n                        <span className=\"text-[13px] font-medium tracking-tight\">{t.sidebar.logout}</span>\r\n                    </button>\r\n                    <div className=\"system-card p-4 flex items-center gap-3 bg-white/[0.02]\">\r\n                        <div className=\"w-2 h-2 bg-ios-cyan rounded-full animate-pulse shadow-[0_0_8px_rgba(0,229,255,0.4)]\"></div>\r\n                        <p className=\"text-[10px] font-bold text-white/30 uppercase tracking-[0.2em]\">{t.sidebar.active}</p>\r\n                    </div>\r\n                </div>\r\n            </aside>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\components\\UntappedCapitalCard.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\lib\\AuthContext.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\lib\\calculations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\lib\\supabaseClient.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\masterkeylabsv2.0\\src\\lib\\translations.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]